<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}">
<head>
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
</head>

<!-- 각 페이지의 CSS가 작성될 위치 -->
<th:block layout:fragment="css">
    <link rel="stylesheet" href="/css/splide.min.css">

    <style>
        .container-fluid {
            max-width: 1600px;
        }

        .splide__arrow--prev {
            left: -50px;
        }

        .splide__arrow--next {
            right: -50px;
        }

        .splide__pagination--ltr {
            top: 190px;
        }

        /* 더보기버튼 */
        .btn-primary {
            background-color: #8fc7f7;
            opacity: 63%;
            border: 1px;
        }

        /*상단 css*/
        .category {
            border-top: 1px solid black;
            border-bottom: 1px solid black;
            padding: 0;
            text-align: center;
        }

        .category_list {
            list-style-type: none;
            display: flex;
            justify-content: space-between; /* 공간 균등 분배 */
            font-family: var(--heading-font);
            color: var(--dark-color);
            font-weight: 700;
            padding: 0;
            margin-bottom: 0;
        }

        /* home>현재페이지 */
        .tabs_header {
            margin-bottom: 10px;
        }

        .category_list > li {
            padding: 0;
            margin: 0;
            width: 12.5%;
            text-align: left;
        }

        .nav-link {
            padding: 0.5rem 1rem;
        }

        /*하단 css*/
        table {
            border-collapse: collapse;
            border-top: 1px solid;
            border-bottom: 1px solid;
            width: 100%;
        }

        #myTab {
            margin: 0px 100px;
        }

        .tab-content {
            margin: 0px 100px;
            padding: 30px;
        }


        .wishful {
            background-color: #D9D9D9;
            height: 150px;
            padding: 15px 20px;
        }

        .join_customer td {
            text-align: center;
        }

        .box2 th {
            background-color: #D9D9D9;
            text-align: center;
        }

        .box2 td {
            text-align: center;
        }

        .active {
            border-color: #52A8E0 #52A8E0 white !important;
        }

        .box2 {
            top: 0;
            left: 0;
            height: 150px;
            overflow-y: scroll;
            margin: 0 auto;
            width: 100%;
            float: left;
            border-collapse: collapse;
            border: 2px solid #52A8E0;
        }

        #myform fieldset {
            display: inline-block;
            direction: rtl;
            border: 0;
        }

        #myform fieldset legend {
            text-align: right;
        }

        #myform input[type=radio] {
            display: none;
        }

        #myform label {
            font-size: 3em;
            color: transparent;
            text-shadow: 0 0 0 #f0f0f0;
        }

        #myform input[type=radio]:checked ~ label {
            text-shadow: 0 0 0 rgba(250, 208, 0, 0.99);
        }

        #reviewContents {
            width: 100%;
            height: 150px;
            padding: 10px;
            box-sizing: border-box;
            border: solid 1.5px #D3D3D3;
            border-radius: 5px;
            font-size: 16px;
            resize: none;
        }

        .review-message {
            margin: 10px 0;
            font-size: 16px;
        }

        .custom-pagination .page-item .page-link {
            padding: 8px 12px; /* 원하는 패딩 값으로 조절 */
            line-height: 1; /* 텍스트 센터 정렬을 위한 라인 높이 조절 */
            margin-bottom: 15px;
        }

        /* swiper slide */
        .swiper {
            width: 100%;
            height: 30%;
        }

        .swiper-slide {
            text-align: center;
            font-size: 18px;
            background: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .swiper-slide img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    </style>
</th:block>

<div layout:fragment="content"
     th:with="enterPrice=${#numbers.formatInteger(new java.math.BigDecimal(auction.auctionStartPrice * 0.0005).setScale(0, T(java.math.BigDecimal).ROUND_HALF_UP)*100,0,'COMMA')}">

    <div class="row">
        <div class="col-sm-1"></div>

        <div class="col-sm-10">

            <section>
                <!-- 카테고리 start -->
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                     fill="currentColor" class="bi bi-house-door-fill"
                     viewBox="0 0 16 16">
                    <path
                            d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5Z"/>
                </svg>
                <a href="/" style="text-decoration: none;">홈</a>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                     fill="currentColor" class="bi bi-chevron-compact-right"
                     viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                          d="M6.776 1.553a.5.5 0 0 1 .671.223l3 6a.5.5 0 0 1 0 .448l-3 6a.5.5 0 1 1-.894-.448L9.44 8 6.553 2.224a.5.5 0 0 1 .223-.671z"/>
                </svg>
                <a href="/">공개입찰경매</a>

                <div class="location">
                    <h3>공개입찰경매</h3>
                </div>
                <div class="category">
                    <ul class="category_list">
                        <li><a th:href="'/auction/publicbid?category=0'"
                               class="nav-link">전체</a></li>
                        <li><a th:href="'/auction/publicbid?category=0'"
                               class="nav-link">인기매물</a></li>
                        <li><a th:href="'/auction/publicbid?category=1'"
                               class="nav-link">디지털기기</a></li>
                        <li><a th:href="'/auction/publicbid?category=2'"
                               class="nav-link">가구/인테리어</a></li>
                        <li><a th:href="'/auction/publicbid?category=3'"
                               class="nav-link">여성의류</a></li>
                        <li><a th:href="'/auction/publicbid?category=4'"
                               class="nav-link">여성잡화</a></li>
                        <li><a th:href="'/auction/publicbid?category=5'"
                               class="nav-link">남성패션/잡화</a></li>
                        <li><a th:href="'/auction/publicbid?category=6'"
                               class="nav-link">생활가전</a></li>
                    </ul>

                    <ul class="category_list">
                        <li><a th:href="'/auction/publicbid?category=7'"
                               class="nav-link">생활/주방</a></li>
                        <li><a th:href="'/auction/publicbid?category=8'"
                               class="nav-link">가공식품</a></li>
                        <li><a th:href="'/auction/publicbid?category=9'"
                               class="nav-link">스포츠/레져</a></li>
                        <li><a th:href="'/auction/publicbid?category=10'"
                               class="nav-link">취미/게임/음반</a></li>
                        <li><a th:href="'/auction/publicbid?category=11'"
                               class="nav-link">뷰티/미용</a></li>
                        <li><a th:href="'/auction/publicbid?category=12'"
                               class="nav-link">식물</a></li>
                        <li><a th:href="'/auction/publicbid?category=13'"
                               class="nav-link">반려동물용품</a></li>
                        <li><a th:href="'/auction/publicbid?category=14'"
                               class="nav-link">티켓/교환권</a></li>
                    </ul>

                    <ul class="category_list">
                        <li><a th:href="'/auction/publicbid?category=15'"
                               class="nav-link">도서</a></li>
                        <li><a th:href="'/auction/publicbid?category=16'"
                               class="nav-link">유아도서</a></li>
                        <li><a th:href="'/auction/publicbid?category=17'"
                               class="nav-link">기타</a></li>
                        <li></li>
                        <li></li>
                        <li></li>
                        <li></li>
                        <li></li>
                    </ul>
                </div>
            </section>
            <!-- 카테고리 end -->

            <h6 style="text-align: right; padding: 10px;"
                th:text="|조회수: ${auction.auctionCount}|"></h6>
            <h4 style="text-align: right;"
                th:text="|현재금액: ${#numbers.formatInteger(auction.auctionNowPrice,3,'COMMA')}원|"></h4>


            <!-- <h4 style="text-align: right"; th:text="|현재금액:${auction.auctionNowPrice}원|"></h4> -->

            <h4 style="text-align: right; margin-right: 60px; margin-bottom: 15px;" th:text="|${auction.remainingTime}|" id="remainTime"></h4>

            <!-- 물품 설명 카드 start -->
            <section class="py-3">
                <div class="container-fluid">
                    <div>
                        <div class="container text-center">
                            <div class="row d-flex flex-row">
                                <div class="col-sm-5">
                                    <!-- 대표이미지 -->
                                    <div class="banner-ad block-1" style="place-self: center;">
                                        <img th:src="${auction.item.itemImgList[0].itemImageUrl}"
                                             style="width:100%; height:100%;"
                                             th:alt="${auction.item.itemName}">
                                    </div>
                                    <!-- 물품 상세 이미지 -->
                                    <div class="swiper mySwiper">
                                        <div class="swiper-wrapper" style="margin-top: 10px; width:50%; height:50%;">
                                            <th:block th:each="img : ${auction.item.itemImgList}">
                                                <div class="swiper-slide"><img th:src="${img.itemImageUrl}" style="height:100%;"></div>
                                            </th:block>
                                        </div>
                                        <div class="swiper-pagination"></div>
                                    </div>
                                    <!-- 물품 상세 이미지 -->
                                </div>


                                <div class="col-sm-2"></div>


                                <div class="col-sm-5">

                                    <!-- 상품 상태설명 시작 -->
                                    <table class="table" style="width: 100%">
                                        <tbody>
                                        <tr>
                                            <th scope="col">물품 이름</th>
                                            <td scope="col" th:text="${auction.item.itemName}"></td>
                                        </tr>
                                        <tr>
                                            <th scope="col">경매예정기간</th>
                                            <td scope="col"
                                                th:text="|${#temporals.format(auction.auctionStartTime,'yyyy-MM-dd HH:mm')} ~ ${#temporals.format(auction.auctionEndTime,'yyyy-MM-dd HH:mm')}|"></td>
                                        </tr>
                                        <tr>
                                            <th scope="col">시작가</th>
                                            <td scope="col"
                                                th:text="|${#numbers.formatInteger(auction.auctionStartPrice, 0, 'COMMA')}원|"></td>
                                        </tr>
                                        <tr>
                                            <th scope="row">입찰단위</th>
                                            <td scope="col" th:text="${enterPrice + '원'}"></td>
                                        </tr>
                                        <tr>
                                            <th scope="row">입찰수</th>
                                            <td scope="col" th:text="|${auction.biddingCount} 회|"></td>
                                        </tr>
                                        <tr>
                                            <th scope="row">진행상태</th>
                                            <td scope="col"
                                                th:if="${auction.auctionStatus.toString().equals('PROGRESS')}">진행중
                                            </td>
                                            <td scope="col"
                                                th:if="${auction.auctionStatus.toString().equals('END')}">마감
                                            </td>
                                            <td scope="col"
                                                th:if="${auction.auctionStatus.toString().equals('LAST')}">1분
                                                남음
                                            </td>
                                            <td scope="col"
                                                th:if="${auction.auctionStatus.toString().equals('PENDING')}">경매대기
                                            </td>
                                        </tr>

                                        <tr>
                                            <th scope="row">판매자 닉네임</th>
                                            <td scope="col">[[${auction.item.member.nickname}]]
                                                <div style="float: right;">
                                                    <button type="button" class="btn btn-primary"
                                                            data-bs-toggle="modal" data-bs-target="#reviewModal">후기
                                                    </button>
                                                    <button type="button" class="btn btn-primary"
                                                            onclick='moveReport()'>신고
                                                    </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <th scope="row">판매자 다른 물품</th>
                                            <td scope="col">[[|${itemCount}건|]]
                                                <div style="float: right;">
                                                    <button type="button" class="btn btn-primary"
                                                            data-bs-toggle="modal" data-bs-target="#otherItemModal">더보기
                                                    </button>
                                            </td>
                                        </tr>


                                    </table>
                                    <!-- 모달 시작 -->
                                    <div class="modal fade" id="otherItemModal" tabindex="-1"
                                         aria-labelledby="reviewModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-lg">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="reviewModalLabel"
                                                        th:text="|${auction.item.member.nickname}님의 다른 판매 물품|"></h5>
                                                    <button type="button" class="btn-close"
                                                            data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body ">
                                                    <table class="table">
                                                        <thead>
                                                        <tr>
                                                            <th scope="col">물품이름</th>
                                                            <th scope="col">가격</th>
                                                            <th scope="col">진행상태</th>
                                                            <th scope="col">경매구분</th>
                                                        </tr>
                                                        </thead>
                                                        <tbody>
                                                        <tr th:each="reviewAuction: ${auctionList} ">
                                                            <th scope="row"
                                                                th:text="${reviewAuction.item.itemName}"></th>
                                                            <td th:text="${reviewAuction.auctionNowPrice}"></td>
                                                            <td
                                                                    th:if="${reviewAuction.auctionStatus.toString().equals('PROGRESS')}">
                                                                진행중
                                                            </td>
                                                            <td
                                                                    th:if="${reviewAuction.auctionStatus.toString().equals('END')}">
                                                                마감
                                                            </td>
                                                            <td
                                                                    th:if="${reviewAuction.auctionStatus.toString().equals('LAST')}">
                                                                지난 경매
                                                            </td>
                                                            <td
                                                                    th:if="${reviewAuction.auctionStatus.toString().equals('PENDING')}">
                                                                대기중
                                                            </td>
                                                            <td
                                                                    th:if="${reviewAuction.auctionType.toString()} == 'REALTIME'"
                                                                    th:text="실시간경매"></td>
                                                            <td
                                                                    th:if="${reviewAuction.auctionType.toString()} == 'PUBLIC'"
                                                                    th:text="공개입찰경매"></td>
                                                            <td
                                                                    th:if="${reviewAuction.auctionType.toString()} == 'SEALED'"
                                                                    th:text="비공개경매"></td>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>


                                                <div class="d-flex justify-content-center"
                                                     style="margin-top: 1%;">
                                                    <nav
                                                            th:with="start=${(auctionReview.number/maxPage)*maxPage + 1}
			                									 ,end=(${(auctionReview.totalPages == 0) ? 1 : (start + (maxPage - 1) < auctionReview.totalPages ? start + (maxPage - 1) : auctionReview.totalPages)})"
                                                            aria-label="Page navigation example">
                                                        <ul class="pagination d-flex justify-content-center">
                                                            <li class="page-item"
                                                                th:each="page: ${#numbers.sequence(start, start)}"
                                                                th:classappend="${auctionReview.number eq page }?'active':''">
                                                                <a
                                                                        class="page-link"
                                                                        th:onclick="'loadPage(' + ${0} +')'">이전</a></li>

                                                            <li class="page-item"
                                                                th:each="page: ${#numbers.sequence(start, end)}"
                                                                th:classappend="${auctionReview.number eq page + 1}?'active':''">
                                                                <a class="page-link" th:inline="text"
                                                                   th:onclick="'loadPage(' + ${page - 1} +')'">[[${page}]]</a>
                                                            </li>

                                                            <li class="page-item"
                                                                th:each="page: ${#numbers.sequence(end, end)}"
                                                                th:classappend="${auctionReview.number eq page - 1}?'active':''">
                                                                <a
                                                                        class="page-link"
                                                                        th:onclick="'loadPage(' + ${auctionReview.totalPages - 1} +')'">다음</a>
                                                            </li>
                                                        </ul>
                                                    </nav>
                                                </div>

                                                <div class="modal-footer d-flex justify-content-center">
                                                    <button type="button" class="btn btn-secondary "
                                                            data-bs-dismiss="modal">닫기
                                                    </button>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- 입찰 금액, +,-,♥,입찰 세션 start-->
                                    <div style="justify-self: right;">
                                        <div class="row banner-content"
                                             style="margin-right: 0px; flex-wrap: nowrap;">

                                            <div>
                                                <div style="display: flex; justify-content: right;">
                                                    <div style="line-height: 40px; margin-right: 20px;">입찰금액
                                                    </div>
                                                    <div>
                                                        <input id='sum' type='text' disabled
                                                               th:value="${(new java.math.BigDecimal(auction.auctionStartPrice * 0.0005).setScale(0, T(java.math.BigDecimal).ROUND_HALF_UP) * 100) + auction.auctionNowPrice }"
                                                               name="sum"/>
                                                    </div>
                                                </div>
                                                <div style="display: flex; justify-content: right;">
                                                    <input type='button' onclick='count("minus")'
                                                           th:value="${'-' + enterPrice}"
                                                           style="margin-top: 10px; width: 80px; height: 40px; margin-right: 10px;"/>
                                                    <input
                                                            type='button' onclick='count("plus")'
                                                            th:value="${'+' + enterPrice}"
                                                            style="margin-top: 10px; width: 80px; height: 40px;"/>
                                                </div>
                                                <div>
                                                    <div style="display: flex; justify-content: right;">
                                                        <button class="heartbutton"
                                                                style="margin-top: 10px; width: 80px; height: 40px; border: 1px solid; border-radius: 3px; margin-right: 10px;"
                                                                th:class="${checkWish ? 'be bi-heart' : 'bi bi-heart'}"
                                                                onclick="pushWish(this)"
                                                                th:data-auctionno="${auction.auctionNo}">
                                                            <i
                                                                    th:class="${checkWish ? 'fa-solid fa-heart' : 'fa-regular fa-heart'}"></i>
                                                        </button>
                                                        <input
                                                                style="margin-top: 10px; width: 80px; height: 40px; border: 1px solid; border-radius: 3px;"
                                                                type='button' onclick="bidding()" value='입찰'/>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <!-- 입찰 금액, +,-,♥,입찰 세션 end-->

                                </div>

                                <!-- 모달 종료 -->

                                <!-- 상품상태설명 end -->


                            </div>
                        </div>
                    </div>
                </div>

            </section>
            <!-- 물품카드 end -->

            <div class="modal fade" id="otherItemModal" tabindex="-1"
                 aria-labelledby="reviewModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="reviewModalLabel"
                                th:text="|${auction.item.member.nickname}님의 다른 판매 물품|"></h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                        </div>
                        <div class="modal-body ">
                            <table class="table">
                                <thead>
                                <tr>
                                    <th scope="col">물품이름</th>
                                    <th scope="col">가격</th>
                                    <th scope="col">진행상태</th>
                                    <th scope="col">경매구분</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="reviewAuction: ${auctionList} ">
                                    <th scope="row"><a th:href="'/auction/detail/' + ${reviewAuction.auctionNo}">[[${reviewAuction.item.itemName}]]</a>
                                    </th>
                                    <td th:text="${reviewAuction.auctionNowPrice}"></td>
                                    <td
                                            th:if="${reviewAuction.auctionStatus.toString().equals('PROGRESS')}">
                                        진행중
                                    </td>
                                    <td
                                            th:if="${reviewAuction.auctionStatus.toString().equals('END')}">
                                        마감
                                    </td>
                                    <td
                                            th:if="${reviewAuction.auctionStatus.toString().equals('LAST')}">
                                        지난 경매
                                    </td>
                                    <td
                                            th:if="${reviewAuction.auctionStatus.toString().equals('PENDING')}">
                                        보류중
                                    </td>
                                    <td
                                            th:if="${reviewAuction.auctionType.toString()} == 'REALTIME'"
                                            th:text="실시간경매"></td>
                                    <td
                                            th:if="${reviewAuction.auctionType.toString()} == 'PUBLIC'"
                                            th:text="공개입찰경매"></td>
                                    <td
                                            th:if="${reviewAuction.auctionType.toString()} == 'SEALED'"
                                            th:text="비공개경매"></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>


                        <div class="d-flex justify-content-center" style="margin-top: 1%;">
                            <nav
                                    th:with="start=${(auctionReview.number/maxPage)*maxPage + 1}
			                									 ,end=(${(auctionReview.totalPages == 0) ? 1 : (start + (maxPage - 1) < auctionReview.totalPages ? start + (maxPage - 1) : auctionReview.totalPages)})"
                                    aria-label="Page navigation example">
                                <ul class="pagination d-flex justify-content-center">
                                    <li class="page-item"
                                        th:each="page: ${#numbers.sequence(start, start)}"
                                        th:classappend="${auctionReview.number eq page }?'active':''"><a
                                            class="page-link" th:onclick="'loadPage(' + ${0} +')'">이전</a></li>

                                    <li class="page-item"
                                        th:each="page: ${#numbers.sequence(start, end)}"
                                        th:classappend="${auctionReview.number eq page + 1}?'active':''">
                                        <a class="page-link" th:inline="text"
                                           th:onclick="'loadPage(' + ${page - 1} +')'">[[${page}]]</a>
                                    </li>

                                    <li class="page-item"
                                        th:each="page: ${#numbers.sequence(end, end)}"
                                        th:classappend="${auctionReview.number eq page - 1}?'active':''"><a
                                            class="page-link"
                                            th:onclick="'loadPage(' + ${auctionReview.totalPages - 1} +')'">다음</a>
                                    </li>
                                </ul>
                            </nav>
                        </div>


                        <div class="modal-footer d-flex justify-content-center">
                            <button type="button" class="btn btn-secondary "
                                    data-bs-dismiss="modal">닫기
                            </button>

                        </div>
                    </div>
                </div>
            </div>


            <!-- 판매자 다른물품 모달 -->

            <div class="container text-center">
                <div class="row">
                    <div class="col-sm-1"></div>
                    <div class="col-sm-10">
                        <section>
                            <div>
                                <h1 style="margin-bottom: 20px;">입찰현황</h1>
                                <div class="box2 scrollnone">
                                    <table class="colr_table2"
                                           style="border-bottom: none; border-top: none;">
                                        <tr>
                                            <th scope="col">번호</th>
                                            <th>입찰자</th>
                                            <th>입찰날짜</th>
                                            <th>입찰금액</th>
                                            <th>결과</th>
                                        </tr>
                                        <tr th:each="bidding, stat: ${biddingList}">
                                            <td th:text="${stat.count}"></td>
                                            <td th:text="${bidding.member.nickname}"></td>
                                            <td th:text="${#temporals.format(bidding.biddingTime,'yyyy-MM-dd HH:mm')}"></td>
                                            <td th:text="${bidding.biddingPrice}"></td>
                                            <td th:if="|${stat.count.toString.equals('1')}|">최고입찰자</td>
                                            <td th:unless="|${stat.count.toString.equals('1')}|">유찰</td>
                                        </tr>
                                    </table>
                                </div>

                            </div>

                        </section>
                    </div>
                    <div class="col-sm-1"></div>
                </div>
            </div>

            <section style="margin-top: 100px;">
                <div class="tab col-mb-8" id="bthtab">
                    <ul class="nav nav-tabs" id="myTab" role="tablist"
                        style="border-bottom: 1px solid #52A8E0;">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="home-tab"
                                    data-bs-toggle="tab" data-bs-target="#home" type="button"
                                    role="tab" aria-controls="home" aria-selected="true">물품정보
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="profile-tab" data-bs-toggle="tab"
                                    data-bs-target="#profile" type="button" role="tab"
                                    aria-controls="profile" aria-selected="false">물품문의
                            </button>
                        </li>
                        <li class="nav-item" role="presentation"
                            th:if="${auction.item.itemWidth != NULL && auction.item.itemDepth != NULL && auction.item.itemHeight != NULL }">
                            <button class="nav-link" id="profile-tab" data-bs-toggle="tab"
                                    data-bs-target="#standard" type="button" role="tab"
                                    aria-controls="standard" aria-selected="false">규격
                            </button>
                        </li>

                    </ul>
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="home" role="tabpanel"
                             aria-labelledby="home-tab">
                            <div class="wishful">
                                <span th:utext="${auction.item.itemDetail}"></span>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="profile" role="tabpanel"
                             aria-labelledby="profile-tab">
                            <div class="join_customer">
                                <table>
                                    <tr style="text-align: center;">
                                        <th scope="col">번호</th>
                                        <th>질문구분</th>
                                        <th>제목</th>
                                        <th>등록자</th>
                                        <th>등록일자</th>
                                    </tr>
                                    <tr th:each="query, stat: ${auctionQueryList}">
                                        <td th:text="${stat.count}"></td>
                                        <td th:if="${query.auctionQueryDistinction.toString.equals('ETC')}">기타</td>
                                        <td th:if="${query.auctionQueryDistinction.toString.equals('ITEM')}">물품</td>
                                        <td th:if="${query.auctionQueryDistinction.toString.equals('SHIPPING')}">배송</td>
                                        <td th:text="${query.auctionQueryTitle}"
                                            th:onclick="'javascript:moveDetail(' + ${query.auctionQueryNo} +')'"></td>
                                        <td th:text="${query.member.nickname}"></td>
                                        <td th:text="${#temporals.format(query.regTime,'yyyy-MM-dd HH:mm')}"></td>
                                    </tr>
                                </table>
                            </div>
                            <div class="form-group row" style="padding-top: 20px;">
                                <div class="col-sm-offset-2" style="text-align: right;">

                                    <input onclick="moveQuery()" type="button"
                                           class="btn btn-primary" value="문의하기"
                                           style="inherit;"/>
                                </div>

                            </div>
                        </div>
                        <div class="tab-pane fade" id="standard" role="tabpanel"
                             aria-labelledby="standard-tab">
                            <div class="standard wishful">
                                <p th:text="|가로 : ${auction.item.itemWidth}cm|"></p>
                                <p th:text="|세로 : ${auction.item.itemDepth}cm|"></p>
                                <p th:text="|높이 : ${auction.item.itemHeight}cm|"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <div class="col-sm-1"></div>
        </div>
        <!-- 후기 모달 -->
        <div class="modal fade" id="reviewModal" tabindex="-1"
             aria-labelledby="reviewModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg"
                 style="--bs-modal-width: 1200px !important;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="reviewModalLabel"
                            th:text="|${auction.item.member.nickname}님의 후기 리스트|"></h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                                aria-label="Close"></button>
                    </div>
                    <div class="modal-body ">
                        <p class="review-message"
                           th:text="후기가 + '&nbsp' + ${reviewCount} + 건 + '&nbsp' +검색되었습니다."></p>
                        <table class="table">
                            <thead>
                            <tr class="review">
                                <th scope="col" style="width: 250px;">물품명</th>
                                <th scope="col">리뷰</th>
                                <th scope="col" style="width: 300px;">별점</th>
                                <th scope="col" style="border-right: 0px; width: 150px;">작성자</th>

                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="auctionReview:${auctionReview}" class="review"
                                id="review">

                                <td th:text=${auctionReview.auction.item.itemName}></td>
                                <td th:text=${auctionReview.auctionReviewTitle}></td>
                                <td>
                                    <!-- 별점 -->
                                    <form class="mb-3" name="myform" id="myform" method="post"
                                          style="margin-bottom: 0px !important;">
                                        <fieldset>
                                            <input type="radio" name="reviewStar" value="5" id="rate1"
                                                   th:if="${auctionReview.auctionReviewScore.toString() == '5'}"
                                                   checked><label for="rate1">★</label> <input
                                                type="radio" name="reviewStar" value="4" id="rate2"
                                                th:if="${auctionReview.auctionReviewScore.toString() == '4'}"
                                                checked><label for="rate2">★</label> <input
                                                type="radio" name="reviewStar" value="3" id="rate3"
                                                th:if="${auctionReview.auctionReviewScore.toString() == '3'}"
                                                checked><label for="rate3">★</label> <input
                                                type="radio" name="reviewStar" value="2" id="rate4"
                                                th:if="${auctionReview.auctionReviewScore.toString() == '2'}"
                                                checked><label for="rate4">★</label> <input
                                                type="radio" name="reviewStar" value="1" id="rate5"
                                                th:if="${auctionReview.auctionReviewScore.toString() == '1'}"
                                                checked><label for="rate5">★</label>
                                        </fieldset>
                                    </form>

                                </td>

                                <td scope="row" th:text="${auctionReview.member.nickname}"
                                    style="border-right: 0px;"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="d-flex justify-content-center" style="margin-top: 1%;">
                        <nav
                                th:with="start=${(auctionReview.number/maxPage)*maxPage + 1}
			                									 ,end=(${(auctionReview.totalPages == 0) ? 1 : (start + (maxPage - 1) < auctionReview.totalPages ? start + (maxPage - 1) : auctionReview.totalPages)})"
                                aria-label="Page navigation example">
                            <ul class="pagination d-flex justify-content-center">
                                <li class="page-item"
                                    th:each="page: ${#numbers.sequence(start, start)}"
                                    th:classappend="${auctionReview.number eq page }?'active':''"><a
                                        class="page-link" th:onclick="'loadPage(' + ${0} +')'">이전</a></li>

                                <li class="page-item"
                                    th:each="page: ${#numbers.sequence(start, end)}"
                                    th:classappend="${auctionReview.number eq page + 1}?'active':''">
                                    <a class="page-link" th:inline="text"
                                       th:onclick="'loadPage(' + ${page - 1} +')'">[[${page}]]</a>
                                </li>

                                <li class="page-item"
                                    th:each="page: ${#numbers.sequence(end, end)}"
                                    th:classappend="${auctionReview.number eq page - 1}?'active':''"><a
                                        class="page-link"
                                        th:onclick="'loadPage(' + ${auctionReview.totalPages - 1} +')'">다음</a>
                                </li>
                            </ul>
                        </nav>
                    </div>

                    <div class="modal-footer d-flex justify-content-center">
                        <button type="button" class="btn btn-secondary "
                                data-bs-dismiss="modal">닫기
                        </button>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- end s-content -->


<!-- 각 페이지의 스크립트가 작성될 위치 -->
<th:block layout:fragment="script">
    <script
            src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js"

            crossorigin="anonymous"></script>
    <script src="/js/splide.min.js"></script>
    <script th:inline="javascript">
        let auctionNo = [[${auction.auctionNo}]];
        function moveReport() {
            location.href='/auction/report/' + [[${auction.auctionNo}]];
        }

        function moveQuery() {
            location.href='/auction/query/add/' +  [[${auction.auctionNo}]];
        }

        var swiper = new Swiper(".mySwiper", {
            pagination: {
                el: ".swiper-pagination",
            },
        });
        document.addEventListener('DOMContentLoaded', function () {
            var splide = new Splide('.splide');
            splide.mount();
        });


        let auctionPrice = [[${new java.math.BigDecimal(auction.auctionStartPrice * 0.0005).setScale(0, T(java.math.BigDecimal).ROUND_HALF_UP)*100	}]];
        function count(type) {
            // 결과를 표시할 element
            const resultElement = document.getElementById('sum');
            const resultElement2 = document.getElementById('price');
            // 현재 화면에 표시된 값
            let number = resultElement.value;
            // 더하기/빼기
            if (type === 'plus') {
                number = parseInt(number) + auctionPrice;
            } else if (type === 'minus') {
                number = parseInt(number) - auctionPrice;
            }
            // 결과 출력
            resultElement.value = number;
        }


        var remainingTimeElement = document.getElementById("remainTime");
        var countdownInterval;

        var durationText = remainingTimeElement.textContent.trim();
        var regex = /[^0-9]/g;

        var hours = parseInt((durationText.match(/\d+(?=시)/) || [])[0] || 0);
        var minutes = parseInt((durationText.match(/\d+(?=분)/) || [])[0] || 0);
        var seconds = parseInt((durationText.match(/\d+(?=초)/) || [])[0] || 0);
        var Time = (hours * 3600) + (minutes * 60) + seconds;

        var updateTime = setInterval(function() {
            hours = parseInt(Time/3600);
            minutes = parseInt((Time%3600) / 60);
            seconds = Time%60;

            Time--;
            countdownInterval = setInterval(updateTime, 10000);
            if([[${auction.remainingTime}]] === '대기중인 경매') {
                document.getElementById("remainTime").innerHTML = "대기중인 경매 입니다.";
                return;
                clearInterval(updateTime); // 함수를 종료하기 위해 clearInterval을 호출합니다.
            } else if([[${auction.remainingTime}]] === '종료된 경매') {
                document.getElementById("remainTime").innerHTML = "종료된 경매입니다.";
                return;
                clearInterval(updateTime); // 함수를 종료하기 위해 clearInterval을 호출합니다.
            } else if(Time > 0){
                document.getElementById("remainTime").innerHTML = "남은시간 : " + hours + "시간" + minutes + "분" + seconds + "초";
            }
        }, 1000 );




        function bidding() {

            var token = $("meta[name='_csrf']").attr("content");
            var header = $("meta[name='_csrf_header']").attr("content");


            var price = $("#sum").val();
            var url = '/auction/bidding';
            var method = "POST";

            $.ajax({
                url: url,
                type: method,
                beforeSend: function (xhr) {
                    xhr.setRequestHeader(header, token);
                },
                data: JSON.stringify({
                    auctionNo: auctionNo,
                    price: price
                }),
                contentType: "application/json",
                success: function (result, status, jqXHR) {
                    // 요청 성공 처리
                    alert('등록 완료');
                    window.location.reload();
                },
                error: function (jqXHR, status, error) {
                    if (jqXHR.status == '401') {
                        alert('로그인 후 이용해주세요.');
                        location.href = '/member/login';
                    } else {
                        alert(jqXHR.responseText);
                        window.location.reload();
                    }

                }
            });
        }

        function loadPage(pageNumber) {

            $.ajax({
                url: '/auction/detail/' + [[${auctionNo}]] + '/' + pageNumber,
                type: 'GET',
                success: function(response) {
                    $('#reviewModal .modal-body').html($(response).find('.modal-body').html());
                }
            });
        }

        //찜 버튼에 대한 기능
        function pushWish(heartIcon) {
            /*
             색있는 하트: <i class="fa-solid fa-heart"></i>
             빈 하트: <i class="fa-regular fa-heart"></i>
            */
            var isWished = heartIcon.classList.contains( 'be');
            var auctionNo = heartIcon.getAttribute('data-auctionno');
            var token = $("meta[name='_csrf']").attr("content");
            var header = $("meta[name='_csrf_header']").attr("content");
            var url = isWished ? "/deleteWish" : "/addWish"; //삼항연산자
            var method = isWished ? "DELETE" : "POST";


            function moveQuery() {
                location.href='/auction/query/add/' + [[${auction.auctionNo}]];
            }

            $.ajax({
                url: url,
                type: method,
                beforeSend: function(xhr) {
                    xhr.setRequestHeader(header, token);
                },
                data: JSON.stringify({ auctionNo: auctionNo }),
                contentType: "application/json",
                success: function(result) {
                    // 요청 성공 처리
                    console.log("찜 " + (isWished ? "취소" : "추가") + "성공");
                    // 찜 상태 토글
                    if(method == "DELETE") {
                        heartIcon.innerHTML = "<i class='fa-regular fa-heart'></i>";
                        heartIcon.classList.toggle('be'); // 찜 미완료
                    } else {
                        heartIcon.innerHTML = "<i class='fa-solid fa-heart'></i>";
                        heartIcon.classList.toggle('bi'); //찜 완료
                    }
                    window.location.reload(true);
                },
                error: function(jqXHR, status, error) {
                    // 오류 처리
                    console.log(jqXHR.responseText);
                    alert("에러가 발생했습니다. 다시 시도해 주세요.");

                }
            });

        }
    </script>


</th:block>


</html>